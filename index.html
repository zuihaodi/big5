function buildBig5Narrative(scores) {
  const order = ["O", "C", "E", "A", "N"];

  const summaries = [];
  const abilities = [];

  order.forEach(dim => {
    const info = scores[dim];
    const profile = profiles[dim][info.stage];

    // 只取「表现为：……」这句，不再重复“在开放性上，你更接近……”
    // 这里直接使用 profile.big5Summary，必要时去掉末尾句号再统一加。
    let s = profile.big5Summary || "";
    s = s.replace(/。$/u, ""); // 去掉末尾的全角句号，避免重复
    summaries.push(s);

    // 能力关键词累积去重
    if (Array.isArray(profile.abilitySummary)) {
      abilities.push(...profile.abilitySummary);
    }
  });

  // 1. 你的整体画像大致为：按 1~5 编号列出五个维度的性格描述
  const numberedLines = summaries.map((text, idx) => {
    // 1.主动接触新信息和方法，对不确定性有一定容忍度。
    return (idx + 1) + "．" + text + "。";
  });

  // 使用换行符，让结构更清晰；浏览器会把换行压成空格显示，但复制文本时结构是清晰的
  const narrative =
    "你的整体画像大致为：\n" +
    numberedLines.join("\n");

  // 2. 能力关键词一句话概括（用「您目前较突出的能力关键词包括：」）
  const uniqueAbilities = Array.from(new Set(abilities));
  const abilityText =
    "您目前较突出的能力关键词包括：" +
    uniqueAbilities.join("，") +
    "（可作为后续成长与使用优势的着力点）。";

  return { narrative, abilityText };
}
